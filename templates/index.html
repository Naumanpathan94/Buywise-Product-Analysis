<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BuyWise</title>
    <!-- Bootstrap 5 CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      crossorigin="anonymous"
    />
    <!-- Animate.css -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/styles.css') }}"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
    />
    <style>
      html, body {
        height: 100%;
        width: 100%;
        margin: 0;
        padding: 0;
      }
      body {
        background: linear-gradient(135deg, #18181b 0%, #312e81 100%);
        min-height: 100vh;
        min-width: 100vw;
        width: 100vw;
        height: 100vh;
        color: #e5e7eb;
        overflow-x: hidden;
      }
      .container {
        min-width: 100vw;
        min-height: 100vh;
        width: 100vw;
        height: 100vh;
        padding: 0 !important;
        margin: 0 !important;
        display: flex !important;
        justify-content: center !important;
        align-items: center !important;
      }
      .main-card {
        background: #232336;
        border-radius: 1.5rem;
        box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.25);
        padding: 2.5rem 2rem;
        margin: 0 auto;
        color: #e5e7eb;
        width: 100vw;
        max-width: 100vw;
      }
      #suggestions {
        position: absolute;
        z-index: 1000;
        width: 100%;
        background: #232336;
        border: 1px solid #374151;
        border-top: none;
        border-radius: 0 0 0.5rem 0.5rem;
        box-shadow: 0 4px 16px rgba(0,0,0,0.15);
        max-height: 200px;
        overflow-y: auto;
      }
      #suggestions div {
        padding: 0.5rem 1rem;
        cursor: pointer;
        transition: background 0.2s;
        color: #e5e7eb;
      }
      #suggestions div:hover {
        background: #3730a3;
        color: #fff;
      }
      .form-group {
        position: relative;
      }
      .form-control, .form-control:focus {
        background: #18181b;
        color: #e5e7eb;
        border: 1px solid #6366f1;
      }
      #product_name::placeholder {
        color: #fff !important;
        opacity: 1;
      }
      /* Enhance the textarea for user review */
      #customer_review,
      #customer_review:focus {
        background: #232336 !important;
        color: #38bdf8 !important; /* Changed from #fbbf24 to #38bdf8 */
        border: 2px solid #38bdf8 !important;
        font-size: 1.15rem;
        font-family: 'Segoe UI', 'Roboto', sans-serif;
        box-shadow: 0 2px 12px rgba(99,102,241,0.10);
        transition: border-color 0.2s, box-shadow 0.2s, background 0.2s;
        outline: none;
        caret-color: #38bdf8; /* Changed from #fbbf24 to #38bdf8 */
        resize: vertical;
      }
      #customer_review:focus {
        background: #18181b !important;
        border-color: #6366f1 !important;
        color: #38bdf8 !important; /* Changed from #fbbf24 to #38bdf8 */
        box-shadow: 0 0 0 2px #6366f1;
      }
      #customer_review::placeholder {
        color: #a5b4fc !important;
        opacity: 1;
        font-style: italic;
        font-size: 1.08rem;
      }
      /* Enhance the "Your Name" text field */
      #customer_name,
      #customer_name:focus {
        background: #232336 !important;
        color: #38bdf8 !important;
        border: 2px solid #38bdf8 !important;
        font-size: 1.08rem;
        font-family: 'Segoe UI', 'Roboto', sans-serif;
        box-shadow: 0 2px 12px rgba(96,165,250,0.10);
        transition: border-color 0.2s, box-shadow 0.2s, background 0.2s;
        outline: none;
        caret-color: #38bdf8;
      }
      #customer_name:focus {
        background: #18181b !important;
        border-color: #6366f1 !important;
        color: #38bdf8 !important;
        box-shadow: 0 0 0 2px #6366f1;
      }
      #customer_name::placeholder {
        color: #a5b4fc !important;
        opacity: 1;
        font-style: italic;
        font-size: 1.05rem;
      }
      .btn-analyze {
        background: linear-gradient(90deg, #6366f1 0%, #60a5fa 100%);
        color: #fff;
        border: none;
        border-radius: 2rem;
        padding: 0.5rem 2rem;
        font-weight: 600;
        transition: background 0.2s, transform 0.2s;
      }
      .btn-analyze:hover {
        background: linear-gradient(90deg, #60a5fa 0%, #6366f1 100%);
        transform: translateY(-2px) scale(1.03);
      }
      h1 {
        font-family: 'Segoe UI', 'Roboto', sans-serif;
        font-weight: 700;
        letter-spacing: 1px;
        color: #a5b4fc;
      }
      .result-section {
        animation: fadeInUp 1s;
        background: #18181b;
        border-radius: 1rem;
        box-shadow: 0 4px 24px rgba(99,102,241,0.10);
      }
      .about-section {
        background: linear-gradient(90deg, #232336 0%, #18181b 100%);
        border-radius: 1rem;
        box-shadow: 0 4px 24px rgba(99,102,241,0.07);
        padding: 2rem 2rem 1.5rem 2rem;
        margin-bottom: 2.5rem;
        margin-top: 1.5rem;
        font-family: 'Segoe UI', 'Roboto', sans-serif;
        animation: fadeIn 1.2s;
        color: #e5e7eb;
      }
      .about-title {
        font-size: 2rem;
        font-weight: 700;
        color: #a5b4fc;
        letter-spacing: 1px;
        margin-bottom: 1rem;
      }
      .about-features {
        font-size: 1.1rem;
        color: #c7d2fe;
        margin-bottom: 0;
        padding-left: 0;
        list-style: none;
      }
      .about-features li {
        margin-bottom: 0.7rem;
        display: flex;
        align-items: center;
        font-size: 1.08rem;
        animation: fadeInLeft 1s;
      }
      .about-features i {
        color: #818cf8;
        font-size: 1.3rem;
        margin-right: 0.7rem;
        min-width: 1.6rem;
      }
      .about-highlight {
        color: #818cf8;
        font-weight: 600;
      }
      .card {
        background: #232336;
        color: #e5e7eb;
      }
      .form-control-lg, .form-control-lg:focus {
        background: #18181b;
        color: #e5e7eb;
        border: 1px solid #6366f1;
      }
      .list-group-item {
        background: #232336;
        color: #e7e7eb;
        border: none;
      }
      .list-group-item-action:hover, .list-group-item-action:focus {
        background: #3730a3;
        color: #fff;
      }
      .badge.bg-primary, .badge.bg-info, .badge.bg-warning, .badge.bg-success, .badge.bg-danger, .badge.bg-secondary {
        color: #fff !important;
      }
      .bg-primary { background-color: #6366f1 !important; }
      .bg-info { background-color: #60a5fa !important; }
      .bg-warning { background-color: #f59e42 !important; }
      .bg-success { background-color: #22c55e !important; }
      .bg-danger { background-color: #ef4444 !important; }
      .bg-secondary { background-color: #64748b !important; }
      .bg-light { background-color: #18181b !important; color: #e5e7eb !important; }
      .shadow, .shadow-lg {
        box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.25) !important;
      }
      #user_review_title::placeholder {
        color: #a5b4fc !important;
        opacity: 1;
        font-style: italic;
        font-size: 1.05rem;
      }
    </style>
    <script>
      async function fetchProductNames() {
        const response = await fetch("/product_names");
        const data = await response.json();
        return data.product_names;
      }

      document.addEventListener("DOMContentLoaded", () => {
        const input = document.getElementById("product_name");
        const suggestions = document.getElementById("suggestions");

        let productNames = [];

        fetchProductNames().then((names) => {
          productNames = names;
        });

        input.addEventListener("input", () => {
          const query = input.value.toLowerCase();
          suggestions.innerHTML = "";
          if (query) {
            const filteredNames = productNames.filter((name) =>
              name.toLowerCase().includes(query)
            );
            filteredNames.forEach((name) => {
              const div = document.createElement("div");
              div.textContent = name;
              div.classList.add("list-group-item", "list-group-item-action");
              div.addEventListener("click", () => {
                input.value = name;
                suggestions.innerHTML = "";
              });
              suggestions.appendChild(div);
            });
          }
        });

        document.addEventListener("click", (e) => {
          if (!suggestions.contains(e.target) && e.target !== input) {
            suggestions.innerHTML = "";
          }
        });

        // --- User Review AJAX Submission ---
        const reviewForm = document.getElementById("customer-review-form");
        if (reviewForm) {
          reviewForm.addEventListener("submit", async function (e) {
            e.preventDefault();
            const formData = new FormData(reviewForm);
            const response = await fetch("/submit_review", {
              method: "POST",
              body: formData,
            });
            const data = await response.json();

            // Update sentiment score and category
            const userReviewResult = document.getElementById("user-review-result");
            if (userReviewResult) {
              let html = "";
              if (data.user_sentiment_score !== null) {
                html += `<h5 class="mb-3">Your Review Sentiment</h5>
                  <p>
                    <span class="fw-bold">Score:</span>
                    <span class="badge bg-info fs-5">${data.user_sentiment_score}</span>
                  </p>
                  <p>
                    <span class="fw-bold">Category:</span>`;
                if (data.user_sentiment_category === "positive") {
                  html += `<span class="badge bg-success fs-5"><i class="bi bi-hand-thumbs-up-fill"></i> Positive</span>`;
                } else if (data.user_sentiment_category === "negative") {
                  html += `<span class="badge bg-danger fs-5"><i class="bi bi-hand-thumbs-down-fill"></i> Negative</span>`;
                } else {
                  html += `<span class="badge bg-secondary fs-5"><i class="bi bi-emoji-neutral-fill"></i> Neutral</span>`;
                }
                html += `</p>`;
              }
              userReviewResult.innerHTML = html;
            }

            // Update main charts and stats
            if (data.plot_url) {
              document.getElementById("main-bar-chart").src = "data:image/png;base64," + data.plot_url;
            }
            if (data.sentiment_time_url) {
              const sentimentImg = document.querySelector('img[alt="Sentiment Over Time"]');
              if (sentimentImg) {
                sentimentImg.src = "data:image/png;base64," + data.sentiment_time_url;
              }
            }
            if (data.result) {
              document.getElementById("main-result-text").textContent = data.result;
            }
            if (data.avg_rating !== null) {
              document.getElementById("main-avg-rating").textContent = "Avg Rating: " + data.avg_rating;
            }
            if (data.avg_sentiment !== null) {
              document.getElementById("main-avg-sentiment").textContent = "Avg Sentiment: " + data.avg_sentiment;
            }
            if (data.recommendation) {
              document.getElementById("main-recommendation").textContent = "Recommendation: " + data.recommendation;
            }
            // Update top review card if present
            if (data.top_review) {
              const topReviewCard = document.getElementById("top-review-card");
              if (topReviewCard) {
                let topHtml = `
                <div class="card shadow-lg border-0" style="border-radius:1.5rem;background:linear-gradient(90deg,#232336 60%,#3730a3 100%);">
                  <div class="card-body p-4">
                    <div class="d-flex align-items-center mb-2">
                      <i class="bi bi-trophy-fill text-warning fs-2 me-2"></i>
                      <h4 class="mb-0" style="color:#fbbf24;font-weight:700;letter-spacing:1px;">Top Review</h4>
                      ${data.top_review.is_user ? '<span class="badge bg-info ms-3">Your Review</span>' : ''}
                    </div>
                    <div class="mb-2">
                      <span class="fw-bold" style="color:#60a5fa;"><i class="bi bi-person-circle"></i> ${data.top_review.reviewer_name}</span>
                      ${data.top_review.review_title ? `<span class="ms-2 fst-italic" style="color:#a5b4fc;">${data.top_review.review_title}</span>` : ""}
                    </div>
                    <div class="mb-2" style="font-size:1.13rem;color:#e0e7ef;">
                      <i class="bi bi-chat-quote-fill text-primary"></i>
                      ${data.top_review.review_text}
                    </div>
                    <div>
                      <span class="badge bg-primary fs-6"><i class="bi bi-star-fill"></i> Rating: ${data.top_review.review_rating}</span>
                    </div>
                  </div>
                </div>
                `;
                topReviewCard.innerHTML = topHtml;
              }
            }
            // Optionally reset the form
            reviewForm.reset();
          });
        }
      });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
    <script src="{{ url_for('static', filename='js/legacy-customer-review.js') }}"></script>
  </head>
  <body>
    <div class="container-fluid min-vh-100 p-0" style="background: none; width: 100vw; min-width: 100vw; overflow-x: hidden;">
      <div class="main-card shadow-lg animate__animated animate__fadeIn mx-0" style="max-width:100vw; width:100vw; margin:2rem 0; border-radius:0;">
        <h1 class="mb-4 text-center animate__animated animate__fadeInDown">BUYWISE PRODUCT ANALYSIS</h1>
        
        <!-- Product Name Search Box at the Top -->
        <form method="post" autocomplete="off">
          <div class="form-group mb-4">
            <label for="product_name" class="form-label fw-semibold">Product Name:</label>
            <input
              type="text"
              id="product_name"
              name="product_name"
              class="form-control form-control-lg"
              autocomplete="off"
              placeholder="Type to search..."
              required
            />
            <div id="suggestions" class="list-group"></div>
          </div>
          <div class="d-flex justify-content-center mb-5">
            <button type="submit" class="btn btn-analyze btn-lg shadow animate__animated animate__pulse animate__infinite">Analyze</button>
          </div>
        </form>

        {% if not result %}
        <!-- About Section (only show before user searches) -->
        <div class="about-section animate__animated animate__fadeInDown" style="position:relative;overflow:hidden;">
          <div class="about-title animate__animated animate__fadeInLeft" style="display:flex;align-items:center;">
            <i class="bi bi-stars me-2 animate__animated animate__tada animate__infinite animate__slower"></i>
            Welcome to <span class="about-highlight ms-2">BuyWise</span>
          </div>
          <div class="row align-items-center">
            <div class="col-md-7">
              <p class="mb-3 animate__animated animate__fadeInUp" style="font-size:1.18rem;">
                <span class="about-highlight">BuyWise</span> is your AI-powered shopping assistant that helps you make smarter purchase decisions by analyzing real customer reviews from across the globe.
                <br><br>
                <span style="color:#60a5fa;font-weight:600;">What can you do here?</span>
              </p>
              <ul class="about-features animate__animated animate__fadeInLeft" style="padding-left:0;">
                <li style="display:flex;align-items:flex-start;margin-bottom:1.1rem;">
                  <i class="bi bi-search-heart-fill animate__animated animate__bounceIn" style="margin-top:2px;"></i>
                  <div>
                    <span class="about-highlight">Search Products Instantly:</span>
                    <span style="color:#e5e7eb;"> Start typing a product name and get smart suggestions in real time.</span>
                  </div>
                </li>
                <li style="display:flex;align-items:flex-start;margin-bottom:1.1rem;">
                  <i class="bi bi-bar-chart-fill animate__animated animate__fadeInUp" style="margin-top:2px;"></i>
                  <div>
                    <span class="about-highlight">Visualize Ratings &amp; Sentiments:</span>
                    <span style="color:#e5e7eb;"> Interactive charts show you the distribution of ratings and how customer sentiment changes over time.</span>
                  </div>
                </li>
                <li style="display:flex;align-items:flex-start;margin-bottom:1.1rem;">
                  <i class="bi bi-emoji-smile-fill animate__animated animate__pulse animate__infinite animate__slower" style="margin-top:2px;"></i>
                  <div>
                    <span class="about-highlight">AI Sentiment Analysis:</span>
                    <span style="color:#e5e7eb;"> We analyze reviews in any language and translate them to give you a clear positive, negative, or neutral score.</span>
                  </div>
                </li>
                <li style="display:flex;align-items:flex-start;margin-bottom:1.1rem;">
                  <i class="bi bi-check-circle-fill animate__animated animate__fadeIn" style="margin-top:2px;"></i>
                  <div>
                    <span class="about-highlight">Verified Reviews Only:</span>
                    <span style="color:#e5e7eb;"> Only feedback from verified purchases is considered for accuracy and trust.</span>
                  </div>
                </li>
                <li style="display:flex;align-items:flex-start;margin-bottom:1.1rem;">
                  <i class="bi bi-lightbulb-fill animate__animated animate__flash animate__infinite animate__slower" style="margin-top:2px;"></i>
                  <div>
                    <span class="about-highlight">Smart Recommendations:</span>
                    <span style="color:#e5e7eb;"> Instantly see if a product is a <span style="color:#22c55e;">Buy</span> or <span style="color:#ef4444;">Don't Buy</span> based on real data.</span>
                  </div>
                </li>
                <li style="display:flex;align-items:flex-start;">
                  <i class="bi bi-chat-dots-fill animate__animated animate__fadeInUp" style="margin-top:2px;"></i>
                  <div>
                    <span class="about-highlight">Add Your Own Review:</span>
                    <span style="color:#e5e7eb;"> Share your experience and see its impact on the analysis live!</span>
                  </div>
                </li>
              </ul>
            </div>
            <div class="col-md-5 d-flex justify-content-center align-items-center">
              <div class="animate__animated animate__zoomIn" style="background:rgba(99,102,241,0.08);border-radius:1.2rem;padding:1.5rem;box-shadow:0 4px 24px rgba(99,102,241,0.10);">
                <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="AI Assistant" style="width:110px;height:110px;display:block;margin:0 auto 1rem auto;animation: floatY 2.5s ease-in-out infinite alternate;">
                <div class="text-center" style="font-size:1.08rem;color:#a5b4fc;font-weight:600;">
                  <span class="animate__animated animate__fadeInDown">AI Review Analyzer</span>
                  <br>
                  <span class="animate__animated animate__fadeInUp animate__delay-1s" style="color:#38bdf8;">Your smart shopping guide</span>
                </div>
              </div>
            </div>
          </div>
          <style>
            @keyframes floatY {
              0% { transform: translateY(0);}
              100% { transform: translateY(-18px);}
            }
            .about-features li > div {
              margin-left: 0.7rem;
              line-height: 1.5;
            }
            .about-features li i {
              min-width: 1.6rem;
              font-size: 1.3rem;
              margin-top: 2px;
            }
          </style>
        </div>
        {% endif %}

        {% if result %}
        <!-- Top Review Card -->
        {% if top_review %}
        <div id="top-review-card" class="animate__animated animate__fadeInDown animate__faster mb-4" style="max-width:700px;margin:0 auto; margin-top:0;">
          <div class="card shadow-lg border-0" style="border-radius:1.5rem;background:linear-gradient(90deg,#232336 60%,#3730a3 100%);">
            <div class="card-body p-4">
              <div class="d-flex align-items-center mb-2">
                <i class="bi bi-trophy-fill text-warning fs-2 me-2"></i>
                <h4 class="mb-0" style="color:#fbbf24;font-weight:700;letter-spacing:1px;">Top Review</h4>
                {% if top_review.is_user %}
                  <span class="badge bg-info ms-3">Your Review</span>
                {% endif %}
              </div>
              <div class="mb-2">
                <span class="fw-bold" style="color:#60a5fa;"><i class="bi bi-person-circle"></i> {{ top_review.reviewer_name }}</span>
                {% if top_review.review_title %}
                  <span class="ms-2 fst-italic" style="color:#a5b4fc;">{{ top_review.review_title }}</span>
                {% endif %}
              </div>
              <div class="mb-2" style="font-size:1.13rem;color:#e0e7ef;">
                <i class="bi bi-chat-quote-fill text-primary"></i>
                {{ top_review.review_text }}
              </div>
              <div>
                <span class="badge bg-primary fs-6"><i class="bi bi-star-fill"></i> Rating: {{ top_review.review_rating }}</span>
              </div>
            </div>
          </div>
        </div>
        {% endif %}
        <div class="result-section mt-5 animate__animated animate__fadeInUp animate__faster">
          <h2 class="text-center mb-3">Analysis for <span class="text-primary">{{ product_name }}</span></h2>
          <div class="row justify-content-center align-items-start gx-4" style="width:100vw;max-width:100vw;margin-left:0;margin-right:0;">
            <div class="col-12 col-lg-6 d-flex flex-column align-items-center mb-3 mb-lg-0" style="padding-left:0;padding-right:12px;">
              <img
                id="main-bar-chart"
                src="data:image/png;base64,{{ plot_url }}"
                alt="Rating Distribution"
                class="img-fluid rounded shadow animate__animated animate__zoomIn animate__faster"
                style="max-width: 700px; min-width: 400px; width: 100%; height: 500px; object-fit: contain;"
              />
              <div class="text-center mt-2" style="font-weight:600;color:#60a5fa;font-size:1.1rem;">
                Rating Distribution & Sentiment Trend
              </div>
            </div>
            <div class="col-12 col-lg-6 d-flex flex-column align-items-center" style="padding-left:12px;padding-right:0;">
              {% if sentiment_time_url %}
              <div style="width:100%;display:flex;justify-content:flex-start;">
                <img src="data:image/png;base64,{{ sentiment_time_url }}" alt="Sentiment Over Time" class="img-fluid rounded shadow animate__animated animate__zoomIn animate__faster" style="max-width: 700px; min-width: 400px; width: 100%; height: 500px; object-fit: contain; margin-left:-20px;" />
              </div>
              <div class="text-center mt-2" style="font-weight:600;color:#38bdf8;font-size:1.1rem;">
                <i class="bi bi-graph-up"></i> Sentiment Over Time
              </div>
              {% else %}
              <div class="text-muted text-center">Not enough data</div>
              {% endif %}
            </div>
          </div>
          <p class="lead text-center" id="main-result-text">{{ result }}</p>
          <div class="text-center">
            <span class="badge bg-primary fs-6 me-2" id="main-avg-rating">Avg Rating: {{ avg_rating }}</span>
            <span class="badge bg-info fs-6 me-2" id="main-avg-sentiment">Avg Sentiment: {{ avg_sentiment }}</span>
            <span class="badge bg-warning fs-6" id="main-recommendation">Recommendation: {{ recommendation }}</span>
          </div>
        </div>

        <!-- User Review Sentiment Section -->
        <div id="user-review-result" class="mt-4 text-center animate__animated animate__fadeInUp">
          {% if user_sentiment_score is not none %}
          <h5 class="mb-3">Your Review Sentiment</h5>
          <p>
            <span class="fw-bold">Score:</span>
            <span class="badge bg-info fs-5">{{ user_sentiment_score }}</span>
          </p>
          <p>
            <span class="fw-bold">Category:</span>
            {% if user_sentiment_category == 'positive' %}
              <span class="badge bg-success fs-5"><i class="bi bi-hand-thumbs-up-fill"></i> Positive</span>
            {% elif user_sentiment_category == 'negative' %}
              <span class="badge bg-danger fs-5"><i class="bi bi-hand-thumbs-down-fill"></i> Negative</span>
            {% else %}
              <span class="badge bg-secondary fs-5"><i class="bi bi-emoji-neutral-fill"></i> Neutral</span>
            {% endif %}
          </p>
          {% endif %}
        </div>

        <!-- Customer Reviews Section (with sentiment analysis and storage) -->
        <div class="customer-reviews-section mt-5">
          <div class="card shadow-lg border-0 animate__animated animate__fadeInUp" style="border-radius: 1rem;">
            <div class="card-body p-4">
              <h3 class="text-center mb-4 animate__animated animate__fadeIn">
                <i class="bi bi-people-fill text-primary"></i>
                Customer Reviews & Sentiment
              </h3>
              <form id="customer-review-form" class="animate__animated animate__fadeInUp mb-4">
                <input type="hidden" name="product_name" value="{{ product_name }}">
                <div class="mb-3">
                  <input
                    type="text"
                    class="form-control form-control-lg rounded-4 shadow-sm mb-2"
                    name="customer_name"
                    id="customer_name"
                    placeholder="Your Name"
                    required
                    style="background: #232336 !important; color: #38bdf8 !important; border: 2px solid #38bdf8 !important; font-size: 1.08rem; font-family: 'Segoe UI', 'Roboto', sans-serif; box-shadow: 0 2px 12px rgba(96,165,250,0.10); transition: border-color 0.2s, box-shadow 0.2s, background 0.2s; outline: none; caret-color: #38bdf8;"
                  />
                  <input
                    type="text"
                    class="form-control form-control-lg rounded-4 shadow-sm mb-2"
                    name="user_review_title"
                    id="user_review_title"
                    placeholder="Review Title"
                    required
                    style="background: #232336 !important; color: #38bdf8 !important; border: 2px solid #38bdf8 !important; font-size: 1.08rem; font-family: 'Segoe UI', 'Roboto', sans-serif; box-shadow: 0 2px 12px rgba(96,165,250,0.10); transition: border-color 0.2s, box-shadow 0.2s, background 0.2s; outline: none; caret-color: #38bdf8;"
                  />
                  <textarea
                    class="form-control form-control-lg rounded-4 shadow-sm"
                    name="customer_review"
                    id="customer_review"
                    rows="3"
                    placeholder="Share your experience with this product..."
                    required
                    style="resize: none; background: #f8fafc;"
                  ></textarea>
                </div>
                <div class="d-flex justify-content-center">
                  <button type="submit"
                    class="btn btn-primary btn-lg px-5 py-2 rounded-pill shadow animate__animated animate__pulse animate__infinite"
                    style="font-weight:600; letter-spacing:1px;">
                    <i class="bi bi-send-fill me-2"></i>
                    Submit Review
                  </button>
                </div>
              </form>
              <div id="customer-reviews-list">
                <!-- Reviews will be rendered here -->
              </div>
            </div>
          </div>
        </div>
        {% endif %}
      </div>
    </div>
  </body>
</html>
